<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Star Admin Premium Bootstrap Admin Dashboard Template</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="assets/vendors/iconfonts/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/vendors/iconfonts/ionicons/dist/css/ionicons.css">
    <link rel="stylesheet" href="assets/vendors/iconfonts/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.addons.css">
    <script type="text/javascript" src="controller/frontController.js"></script>

    <!-- Bottom Graph -->
    <script type="text/javascript" src="canvasjs.min.js"></script>
    <script type="text/javascript" src="controller/chart1.js"></script>
    <script type="text/javascript" src="controller/donutChartAge.js"></script>
    <script type="text/javascript" src="controller/donutChartAccidentType.js"></script>

    <script type="text/javascript" src="controller/chart1.js">
      $.noConflict();
      window.onload = jQuery(document).ready(function ($) {
        
        initChart();
        chart.render();
      });
    </script>

    <!-- Map Type Picker -->
    <script>
      // $.noConflict();
      // window.onload = jQuery(document).ready(function ($) {
      //   $( "#speed" ).selectmenu();
      // });
      window.addEventListener("load", myInit, true); 
      function myInit() {  
        findAges();

        document.getElementById('accidentSelect').addEventListener('change', function() {
          findAccidentType();
        });

        document.getElementById('mapData').addEventListener('change', function() {
          // Dados do mapa aqui
        });
      }; 


    </script>
    
    <!-- Map Controller -->
    <script type="text/javascript" src="controller/map.js"></script>
    <script type="text/javascript" src="controller/chart.js"></script>
    <script type="text/javascript" src="controller/heatMapData.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBqWR38L4RRN7k4UWAr2eeOh5ZGXH0bb08&callback=initMap&libraries=visualization&v=weekly"
      defer
    ></script>

    <!-- Date Picker -->
    <!-- <script src="jquery-1.6.1.min.js"></script> -->
    <!-- <script src="datePicker.js"></script> -->
      <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
      <script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
      <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
      <script>
        $.noConflict();
          jQuery(document).ready(function ($) {
            var dateFormat = "mm/dd/yy",
            from = $( "#fromDate" )
              .datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                changeYear: true,
                numberOfMonths: 1,
                maxDate: '-1d',
                minDate: new Date(2015, 0, 1)
              })
              .on( "change", function() {
                var date = getDate( this );

                to.datepicker( "option", "minDate", date );

                var newDate = getDate( this );
                newDate.setMonth(newDate.getMonth() + 1);
                if (newDate > new Date()) {
                    newDate = new Date();
                }

                to.datepicker( "option", "maxDate", newDate );

                to.datepicker( "option", "disabled", false );
              }),
            
            to = $( "#toDate" ).datepicker({
              defaultDate: "+1w",
              changeMonth: true,
              changeYear: true,
              numberOfMonths: 1,
              maxDate: '0',
              minDate: new Date(2015, 0, 2),
              disabled: true
            })
            .on( "change", function() {
              from.datepicker( "option", "maxDate", getDate( this ) );
              findWeatherAccident();
              findAccidentType();
            });
       
          function getDate( element ) {
              var date;
              try {
                date = $.datepicker.parseDate( dateFormat, element.value );
              } catch( error ) {
                date = null;
              }
            return date;
          }
        });
      </script>

    <!-- endinject -->
    <!-- plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="assets/css/shared/style.css">
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/demo_1/style.css">
    <!-- End Layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.ico" />
  </head>
  <body>
    <div class="container-scroller">
      <!-- partial:partials/_navbar.html -->
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <!-- Page Title Header Starts-->
            <div class="row page-title-header">
              <div class="col-12">
                <div class="page-header">
                  <h4 class="page-title">Dashboard</h4>
                  <div class="quick-link-wrapper w-100 d-md-flex flex-md-wrap">
                    <ul class="quick-links">
                      <li><a href="#">ICE Market data</a></li>
                      <li><a href="#">Own analysis</a></li>
                      <li><a href="#">Historic market data</a></li>
                    </ul>
                    <ul class="quick-links ml-auto">
                      <li><a href="#">Settings</a></li>
                      <li><a href="#">Analytics</a></li>
                      <li><a href="#">Watchlist</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="page-header-toolbar">
                  <div class="page-date-picker">
                    <label for="from">De </label>
                    <input type="text" autocomplete="off" id="fromDate" name="fromDate" placeholder="Data Inicial">
                    <label for="to"> Até </label>
                    <input type="text" autocomplete="off" id="toDate" name="toDate" placeholder="Data Final">
                  </div>
                  
                  <div class="page-accident-type-picker-container">
                    <div class="page-accident-type-picker">
                      <form action="#">
                        <fieldset>
                          <label for="accidentType">Tipo de acidente:</label>
                          <select name="accidentType" id="accidentSelect">
                            <option selected="selected">Todos</option>
                            <option>Fatais</option>
                          </select>
                        </fieldset>
                      </form>
                    </div>
                  </div>

                  <div class="page-map-type-picker-container">
                    <div class="page-map-type-picker">
                      <form action="#">
                        <fieldset>
                          <label for="mapType">Selecione dados do mapa</label>
                          <select name="mapType" id="mapData">
                            <option selected="selected">Mapa de acidentes</option>
                            <option>Placas</option>
                          </select>
                        </fieldset>
                      </form>
                    </div>
                  </div>

                  <!-- <div class="btn-group toolbar-item" role="group" aria-label="Basic example"> 
                    <button type="button" class="btn btn-secondary"><i class="mdi mdi-chevron-left"></i></button>
                    <button type="button" class="btn btn-secondary">03/02/2019 - 20/08/2019</button>
                    <button type="button" class="btn btn-secondary"><i class="mdi mdi-chevron-right"></i></button>
                  </div>
                  <div class="filter-wrapper">
                    <div class="dropdown toolbar-item">
                      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownsorting" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">All Day</button>
                      <div class="dropdown-menu" aria-labelledby="dropdownsorting">
                        <a class="dropdown-item" href="#">Last Day</a>
                        <a class="dropdown-item" href="#">Last Month</a>
                        <a class="dropdown-item" href="#">Last Year</a>
                      </div>
                    </div>
                    <a href="#" class="advanced-link toolbar-item">Advanced Options</a>
                  </div>
                  <div class="sort-wrapper">
                    <button type="button" class="btn btn-primary toolbar-item">New</button>
                    <div class="dropdown ml-lg-auto ml-3 toolbar-item">
                      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownexport" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Export</button>
                      <div class="dropdown-menu" aria-labelledby="dropdownexport">
                        <a class="dropdown-item" href="#">Export as PDF</a>
                        <a class="dropdown-item" href="#">Export as DOCX</a>
                        <a class="dropdown-item" href="#">Export as CDR</a>
                      </div>
                    </div>
                  </div>
                  -->
                </div>
              </div>
            </div>
            
            <!-- Mapa -->
            <div class="row">
              <div class="col-md-8 grid-margin stretch-card">
                <div class="card">
                  <div id="map" class="card-body">
                    <!-- MAPA AQUI-->
                  </div>
                </div>
              </div>

              <!-- Grafico -->

              <div class="col-md-4 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body d-flex flex-column">
                    <div class="wrapper">
                      <h4 class="card-title mb-0">Gráficos</h4>
                      <p>Started collecting data from February 2019</p>
                      <div class="mb-4" id="net-profit-legend"></div>
                    </div>
                    <!-- Map right side -->
                    
                    <p>
                      <button type="button" onclick="heatMap()">HeatMap</button>
                      <button type="button" onclick="getRadar()">Radares</button>
                      <button type="button" onclick="getPlaca()">Placas</button>
                      <button type="button" onclick="findRadarById()">parseGrah</button>
                    </p>
                    <p>.</p><p>.</p><p>.</p>

                    <canvas id="chartRadares"></canvas>
                    <p id="testRest"></p>
                  </div>
                </div>
              </div>
            </div>

          <div class="row">
            <div id="ageChart" style="height: 300px; width: 300px; margin: 0px auto;">
              <canvas id="doughnut-age-chart" width="100" height="100"></canvas>  
            </div>

            <div id="typeChart" style="height: 300px; width: 300px; margin: 0px auto;">
              <canvas id="doughnut-type-chart" width="100" height="100"></canvas>  
            </div>            
          </div>          

          <div id="chartContainer" style="height: 300px; max-width: 920px; margin: 0px auto;"></div>
          

          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="container-fluid clearfix">
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright © 2019 <a href="http://www.bootstrapdash.com/" target="_blank">Bootstrapdash</a>. All rights reserved.</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made with <i class="mdi mdi-heart text-danger"></i>
              </span>
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <script src="assets/vendors/js/vendor.bundle.addons.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page-->
    <!-- End plugin js for this page-->
    <!-- inject:js -->
    <script src="assets/js/shared/off-canvas.js"></script>
    <script src="assets/js/shared/misc.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="assets/js/demo_1/dashboard.js"></script>
    <!-- End custom js for this page-->
  </body>
</html>